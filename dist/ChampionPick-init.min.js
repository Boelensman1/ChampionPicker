/*! ChampionPick - v0.1.0 - 2016-02-11
* https://github.com/Boelensman1/ChampionPicker.github.io
* Copyright (c) 2016 ; Licensed  */

function loadData(){"use strict";doingRandom=!0,storage.set("rolesJSON",rolesJSON);var a=!1;loadedOnce===!1&&(loadedOnce=!0,a=!0,setTimeout(function(){forceReload()},5e3),init());var b,c,d=$("#champions");if(a&&order.length!==d.find("li").length){var e,f,g="";for(b=0;b<order.length;++b){c=order[b],e=champions[c].name.replace(/\W/g,""),champions[c].shortName=e,champions[c].name.length>8&&largeNames.push(e),f="<li ",a&&(f+='style="display:none" '),f+='id="champ'+e+'" class="col-lg-1 col-md-1 col-sm-2 col-xs-3 champion toShow showSearch showF2P ',f+=championsDisabled[c]?"disabled ":"notDisabled ";var h=free2play.indexOf(c)>-1;h&&(f+="Free2Play "),console.log(champions[c]),f+='" data-championId="'+c+'"><img class="img-responsive championPortrait" src="'+champions[c].iconUrl+'"><span class="label center-block championLabel ',f+=h?"label-success":"label-default",f+='">'+champions[c].name+"</span></li>",g+=f}if(a||d.empty(),d.append(g),a){var i=0,j=84/order.length,k=$(".championPortrait");k.on("load",function(){i++,updateProgress(j),$(this).parent().hasClass("toShow")&&$(this).parent().show(),i===order.length&&($("#ProgressContainer").hide(),champTextFit())}),i!==order.length&&k.each(function(){this.complete&&$(this).trigger("load")})}else $("#ProgressContainer").hide(),champTextFit();$(".champion").click(function(){$(this).toggleClass("notDisabled");var a,b=$(this).data("championid");$(this).hasClass("Free2Play")&&0!==free2playState?($(this).toggleClass("disabled_f2p"),a=$(this).hasClass("disabled_f2p")):($(this).toggleClass("disabled"),a=$(this).hasClass("disabled")),championsDisabled[b]=a,storage.set("championsDisabled",championsDisabled)})}else $("#ProgressContainer").hide();if(reloadActive(!1),storage.isSet("championsDisabled")&&!storage.isEmpty("championsDisabled"))championsDisabled=storage.get("championsDisabled");else{for(championsDisabled={},b=0;b<order.length;++b)c=order[b],championsDisabled[c]=!1;storage.set("championsDisabled",championsDisabled)}storage.isSet("champPlayed")&&!storage.isEmpty("champPlayed")?champPlayed=storage.get("champPlayed"):(champPlayed={},storage.set("champPlayed",champPlayed)),doingRandom=!1}function init(){"use strict";function a(){$("[data-championId="+randomChampId+"]").click(),b()}function b(){if(doingNext===!0)return!1;doingNext=!0,champPlayed[randomChampId]-=1,champsExcluded.push(randomChampId);var c,d,e=getRandomChampion(champsExcluded);if(e===!1){$(".randomChampionModal").modal("hide");var f=new PNotify({title:"No champions",text:"There are no champions left to choose from.",opacity:.9,icon:"glyphicon glyphicon-envelope",nonblock:{nonblock:!0,nonblock_opacity:.2},history:{history:!1}});return f.get().click(function(){f.options.animation="none",f.remove()}),doingRandom=!1,doingNext=!1,!1}randomChampId=e[0],c=e[1],d=e[2],randomChamp=champions[randomChampId],void 0===champPlayed[e]&&(champPlayed[e]=0),champPlayed[e]+=1,storage.set("champPlayed",champPlayed);var g=$(".randomChampionDialog"),h=g.clone();updateModal(h,randomChamp,randomChampId,rolesPos[c],d.length),h.css("opacity",0),h.css("transform","perspective(550px) rotateY(180deg)"),h.insertAfter(".randomChampionDialog"),g.transition({opacity:0,perspective:550,rotateY:540},1e3),h.transition({opacity:1,perspective:550,rotateY:360},1e3,function(){g.remove(),$(".randomChampionDontHaveButton").click(a),$(".randomChampionNextButton").click(b),doingNext=!1})}$(".randomChampionModal").modal({show:!1}),$(".randomChampionDontHaveButton").click(a),$(".randomChampionNextButton").click(b),$("#championSearch").keyup(function(){var a=$("#championSearch").val().toLowerCase(),b=$(".champion");if(0===a.length)b.removeClass("hiddenSearch"),b.addClass("showSearch");else{var c;a=a.split("|");var d=[];for(c=0;c<a.length;++c){var e=searchFor(a[c]);$.merge(d,e)}b.addClass("hiddenSearch"),b.removeClass("showSearch");var f;for(c=0;c<d.length;++c)f=$("[data-championId="+d[c]+"]"),f.removeClass("hiddenSearch"),f.addClass("showSearch")}}),$(".free2play").click(function(){var a=$(".free2play");switch(free2playState){case 0:free2playState=2,a.removeClass("btn-warning"),a.removeClass("btn-success"),a.addClass("btn-primary"),a.find("p").text("Only");break;case 1:free2playState=0,a.removeClass("btn-success"),a.removeClass("btn-primary"),a.addClass("btn-warning"),a.find("p").text("Disabled");break;case 2:free2playState=1,a.removeClass("btn-warning"),a.removeClass("btn-primary"),a.addClass("btn-success"),a.find("p").text("Enabled")}clearTimeout(free2playTimout),free2playTimout=setTimeout(function(){a.find("p").text(a.data("text"))},1e3),updateFree2Play()}),$(".btn-role").click(function(){var a=$(this).data("roleid");roles[a]=!roles[a],storage.set("roles",roles),reloadActive(!0)});var c=$(".btn-role-sane");c.click(function(){rolesSane=!c.hasClass("active"),storage.set("rolesSane",rolesSane),updateSaneRoles(),reloadActive(!0)}),$("#random").click(function(){if(doingRandom)return!1;doingRandom=!0,champsExcluded=[];var a=getRandomChampion([]);if(a===!1){doingRandom=!1;var b=new PNotify({title:"No possible champions.",text:"Please enable at least 1 champion.",opacity:.9,type:"error",icon:"glyphicon glyphicon-warning-sign",nonblock:{nonblock:!0,nonblock_opacity:.2},history:{history:!1}});return b.get().click(function(){b.options.animation="none",b.remove()}),!1}randomChampId=a[0];var c=a[1],d=a[2],e=d.length;randomChamp=champions[randomChampId],d.length>8&&d.splice(d.indexOf(randomChampId),1),void 0===champPlayed[randomChampId]&&(champPlayed[randomChampId]=0),champPlayed[randomChampId]+=1,storage.set("champPlayed",champPlayed);var f=$("#randomtest");f.empty(),$(".randomChampionModalLore,.randomChampionModalLinks2").height(0),f.css("transform","translate(200px,0px)");var g=Math.min(Math.max(20,d.length-10),35)+Math.floor(10*Math.random());if(d.length<=g+10)for(var h=d.length;d.length<=g+10;){var i=Math.floor(Math.random()*h);d.push(d[i])}shuffle(d),d[g]=randomChampId;var j,k="";for(j=0;g+10>=j;++j)-1!==d[j]&&(k+='<img src="'+champions[d[j]].iconUrl+'">');return f.append(k),setTimeout(function(){$("#randomButton").transition({opacity:0,perspective:550,rotateX:180},1e3),$("#randomSelecter").transition({opacity:1,perspective:550,rotateX:360},1e3),f.transition({x:100*-g+$("#randomSelecterChild").width()/2+400-(70*Math.random()+15)},3e3,"cubic-bezier(.6,-.28,.48,1)",function(){var a=$(".randomChampionDialog");a.css("transform","perspective(550px) rotateY(360deg)"),updateModal(a,randomChamp,randomChampId,rolesPos[c],e),setTimeout(function(){var a=$(".randomChampionModal");adjustModalMaxHeightAndPosition(),a.modal("show"),setTimeout(function(){modalLoreFit(!1)},200),a.on("shown.bs.modal",function(){modalLoreFit(!0)}),a.on("hidden.bs.modal",function(){doingRandom=!1}),setTimeout(function(){$("#randomButton").transition({opacity:1,perspective:550,rotateX:0},1e3),$("#randomSelecter").transition({opacity:0,perspective:550,rotateX:180},1e3)},1e3)},200)})},200),!1}),$("#btn-force-reload").click(function(){forceReload()}),$("#btn-reset-playcount").confirmation({onConfirm:function(){champPlayed={},storage.set("champPlayed",champPlayed);var a=new PNotify({title:"Playcount",text:"The playcount has been reset.",opacity:.9,icon:"glyphicon glyphicon-envelope",nonblock:{nonblock:!0,nonblock_opacity:.2},history:{history:!1}});a.get().click(function(){a.options.animation="none",a.remove()})}}),$("#btn-reset-champions").confirmation({onConfirm:function(){championsDisabled=[],storage.set("championsDisabled",championsDisabled),forceReload()}}),$(".sidebar").on("show.bs.sidebar",function(){var a,b={};for(a=0;a<exportKeys.length;++a)b[exportKeys[a]]=storage.get(exportKeys[a]);$("#settingsExport").val(JSON.stringify(b))}),$("#settingsExport").click(function(){this.setSelectionRange(0,this.value.length)}),$("#settingsImportButton").click(function(){var a,b,c,d=JSON.parse($("#settingsImport").val());for(c=Object.keys(d),a=0;a<c.length;++a)b=c[a],storage.set(b,d[b]),window[b]=d[b];forceReload()}),$.getJSON("data/email.json",function(a){$("#email").text(a[0]),$("#email").attr("href","mailto:"+a[0])})}
//# sourceMappingURL=ChampionPick-init.min.js.map